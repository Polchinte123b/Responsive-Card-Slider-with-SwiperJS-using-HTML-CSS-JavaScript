<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Bingo 1–90 • Orange UI</title>
<style>
  :root{
    --orange1:#ff8a00; --orange2:#ff6a00; --deep:#151515; --text:#1a1a1a; --muted:#666;
    --panel:#ffffff; --line:#e9e9e9; --ok:#16a34a; --danger:#ef4444; --accent:#0ea5e9;
  }
  *{box-sizing:border-box} body{margin:0;font:600 16px/1.3 system-ui,Segoe UI,Roboto,Inter,Arial;background:#fafafa;color:var(--text)}
  .topbar{
    background:linear-gradient(135deg,var(--orange1),var(--orange2));
    color:#fff; padding:10px 14px; position:sticky; top:0; z-index:5;
    display:flex; align-items:center; gap:10px;
  }
  .topbar .btn{background:rgba(255,255,255,.15); border:1px solid rgba(255,255,255,.35); color:#fff;
    padding:8px 12px; border-radius:10px; font-weight:700}
  .wrap{padding:12px}
  /* hero */
  .hero{
    border-radius:18px; overflow:hidden; background:linear-gradient(135deg,var(--orange1),var(--orange2));
    color:#fff; position:relative; padding:18px 14px 28px; min-height:220px;
  }
  .hero-grid{
    display:grid; grid-template-columns: 120px 1fr 120px; align-items:center; gap:10px;
  }
  @media (min-width:720px){ .hero-grid{grid-template-columns: 160px 1fr 160px;} }
  .ball{
    width:120px;height:120px;border-radius:50%; margin:0 auto; display:grid; place-items:center; font-size:54px;
    background:
      radial-gradient(circle at 35% 30%, #fff 0 35%, #f1f1f1 60%, #e6e6e6 72%),
      radial-gradient(160px 100px at 50% 70%, rgba(0,0,0,.25), rgba(0,0,0,0) 60%);
    color:#e01919; font-weight:900; box-shadow:0 10px 30px rgba(0,0,0,.25);
  }
  @media (min-width:720px){ .ball{width:160px;height:160px;font-size:72px} }
  .side-bubble{
    width:86px;height:86px;border-radius:50%; display:grid; place-items:center; font-size:34px; font-weight:900;
    color:#222;
    background:
      radial-gradient(circle at 35% 30%, #fff 0 35%, #f0f0f0 60%, #e6e6e6 72%);
    box-shadow:0 10px 20px rgba(0,0,0,.18);
  }
  .side-wrap{display:flex; justify-content:flex-end; gap:10px}
  .stat-col{
    position:absolute; left:10px; top:14px; display:flex; flex-direction:column; gap:10px; pointer-events:none;
  }
  .pill{
    pointer-events:auto;
    background:rgba(255,255,255,.95); color:#d35400; border-radius:10px; padding:10px 12px; min-width:155px;
    box-shadow:0 6px 16px rgba(0,0,0,.15); border:1px solid rgba(0,0,0,.05);
  }
  .pill b{display:block; color:#222; font-size:18px; margin-top:4px}
  .hero-small{
    position:absolute; right:12px; top:16px; text-align:right; color:#fff; opacity:.9; font-weight:700;
  }
  .next-pot{
    position:absolute; left:50%; transform:translateX(-50%);
    bottom:-18px; background:#2c2c2c; color:#fff; border-radius:16px; padding:10px 14px; font-weight:800;
    box-shadow:0 10px 24px rgba(0,0,0,.25);
  }
  .next-pot b{background:#fff;color:#111;padding:6px 10px;border-radius:10px;margin-left:8px}
  .controls{
    margin-top:34px; display:flex; flex-wrap:wrap; gap:10px; align-items:center; justify-content:center;
  }
  button, select, label.switch{
    border:1px solid var(--line); background:#fff; color:var(--text);
    padding:10px 14px; border-radius:12px; font-weight:800; cursor:pointer;
  }
  .primary{background:#111;color:#fff;border-color:#111}
  .ok{background:var(--ok); color:#fff; border:0}
  .danger{background:var(--danger); color:#fff; border:0}
  .meta{display:flex; justify-content:center; gap:12px; color:#666; font-weight:700; margin-top:8px}
  /* board */
  .panel{background:#fff; border:1px solid var(--line); border-radius:16px; padding:12px; margin-top:12px}
  .grid{display:grid; grid-template-columns:repeat(10,1fr); gap:8px}
  .cell{
    aspect-ratio:1.32/1; display:grid; place-items:center; border:1px solid var(--line);
    border-radius:10px; background:#f7f7f7; font-weight:900; font-size:clamp(16px,2.2vw,22px);
    transition:transform .15s, background .15s, color .15s;
  }
  .cell.called{transform:translateY(-1px); color:#fff; background:#ff9a46}
  .cell.current{outline:3px solid #fff; box-shadow:0 0 0 3px rgba(0,0,0,.2) inset}
  .bar{height:10px;border-radius:8px;background:#eee;overflow:hidden}
  .bar i{display:block;height:100%;width:0;background:linear-gradient(90deg,#22c55e,#16a34a)}
  /* bottom bar */
  .bottom{
    position:sticky; bottom:0; background:#fff; border-top:1px solid var(--line);
    padding:10px 12px; display:flex; align-items:center; justify-content:space-between; gap:10px;
  }
  .buy{background:linear-gradient(135deg,var(--orange1),var(--orange2)); color:#fff; font-weight:900;
    border:none; padding:12px 18px; border-radius:12px}
  .muted{color:#6b7280}
</style>
</head>
<body>

  <div class="topbar">
    <button class="btn" id="menuBtn">Menu</button>
    <div style="font-weight:900;letter-spacing:.3px">Bingo</div>
    <div style="margin-left:auto;display:flex;gap:8px">
      <button id="undoBtn" class="btn" title="Undo (Z)">Undo</button>
      <button id="nextBtn" class="btn" style="background:#111;border-color:#111">Next</button>
    </div>
  </div>

  <div class="wrap">
    <!-- HERO -->
    <section class="hero">
      <div class="hero-grid">
        <div class="side-wrap" id="leftBubbles"></div>
        <div class="ball" id="currentBall">—</div>
        <div class="side-wrap" id="rightBubbles" style="justify-content:flex-start"></div>
      </div>

      <div class="stat-col">
        <div class="pill"><span class="muted" style="font-weight:800">IN PROGRESS</span><b id="p1">₹ 12,588.56</b><small>Unique line</small></div>
        <div class="pill"><b id="p2">₹ 25,176.97</b><small>Double line</small></div>
        <div class="pill"><b id="p3">₹ 46,157.91</b><small>Bingo</small></div>
      </div>

      <div class="hero-small" id="smallStats">
        <div>Drawn: <span id="drawn">0</span> / 90</div>
        <div>Players: <span id="players">408</span></div>
      </div>

      <div class="next-pot">NEXT ROUND: <b id="nextPot">₹ 68,970.30</b></div>
    </section>

    <!-- CONTROLS -->
    <div class="controls">
      <button id="autoBtn" class="ok">Auto: Off</button>
      <label>Speed <input id="speed" type="range" min="0.8" max="8" step="0.2" value="3"></label>
      <label><input id="voice" type="checkbox"> Voice</label>
      <button id="resetBtn" class="danger">Reset</button>
    </div>
    <div class="meta">
      <div class="bar" style="width:min(420px,70vw)"><i id="progress"></i></div>
      <div id="count">0 / 90</div>
    </div>

    <!-- BOARD -->
    <div class="panel">
      <div class="grid" id="grid"></div>
    </div>
  </div>

  <!-- BOTTOM BAR -->
  <div class="bottom">
    <div>
      <div class="muted" style="font-weight:800">Cards: <span id="cards">0</span></div>
      <div class="muted">Balance: ₹ <span id="bal">0.55</span></div>
      <div class="muted" style="font-size:12px">Round: <span id="round">147076</span></div>
    </div>
    <button class="buy">Buy Cards</button>
  </div>

<script>
(() => {
  const TOTAL=90, COLS=10, ROWS=9;
  const el = (id)=>document.getElementById(id);
  const ui = {
    grid: el('grid'), ball: el('currentBall'),
    drawn: el('drawn'), count: el('count'), progress: el('progress'),
    nextBtn: el('nextBtn'), undoBtn: el('undoBtn'), resetBtn: el('resetBtn'),
    autoBtn: el('autoBtn'), speed: el('speed'), voice: el('voice'),
    leftB: el('leftBubbles'), rightB: el('rightBubbles')
  };

  let state = { pile:[], called:[] };
  let timer=null, speaking=false;

  const shuffle=(a)=>{for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]]}return a};
  const save=()=>localStorage.setItem('bingo_orange.v1', JSON.stringify(state));
  const load=()=>{ const s=localStorage.getItem('bingo_orange.v1'); if(s){ try{state=JSON.parse(s)}catch{} } if(!state.pile.length && !state.called.length){ reset(true) } };

  function buildGrid(){
    ui.grid.innerHTML='';
    for(let r=0;r<ROWS;r++){
      for(let c=0;c<COLS;c++){
        const n=r*COLS+(c+1);
        const b=document.createElement('button');
        b.className='cell'; b.textContent=n; b.dataset.n=n; b.type='button';
        ui.grid.appendChild(b);
      }
    }
  }

  function updateBoard(){
    const calledSet=new Set(state.called);
    const current=state.called[state.called.length-1]||null;

    ui.grid.querySelectorAll('.cell').forEach(cell=>{
      const n=+cell.dataset.n;
      cell.classList.toggle('called', calledSet.has(n));
      cell.classList.toggle('current', n===current);
    });

    ui.ball.textContent=current || '—';
    ui.drawn.textContent=state.called.length;
    ui.count.textContent=`${state.called.length} / ${TOTAL}`;
    ui.progress.style.width = `${(state.called.length/TOTAL)*100}%`;

    // side bubbles (last two)
    const last=state.called.slice(-3).reverse(); // show up to 2 beside
    const left = last[1]!=null ? [last[1]]: [];
    const right = last[0]!=null ? [last[0]]: [];
    ui.leftB.innerHTML=''; ui.rightB.innerHTML='';
    left.forEach(n=>ui.leftB.appendChild(makeBubble(n)));
    right.forEach(n=>ui.rightB.appendChild(makeBubble(n)));

    ui.undoBtn.disabled = state.called.length===0;
    ui.nextBtn.disabled = state.pile.length===0;
    if(state.pile.length===0){ stopAuto(); ui.autoBtn.textContent='Auto: Done' }
  }

  function makeBubble(n){
    const d=document.createElement('div'); d.className='side-bubble'; d.textContent=n; return d;
  }

  function next(){
    if(!state.pile.length){updateBoard();return;}
    const n=state.pile.pop(); state.called.push(n); save(); updateBoard(); if(ui.voice.checked) speak(n);
    const currentCell=document.querySelector('.cell.current'); if(currentCell && innerWidth<720) currentCell.scrollIntoView({behavior:'smooth',block:'center'});
  }
  function undo(){
    const n=state.called.pop(); if(n!=null){ state.pile.push(n); save(); updateBoard(); }
  }
  function reset(silent=false){
    state.called=[]; state.pile=shuffle(Array.from({length:TOTAL},(_,i)=>i+1)); save(); stopAuto(); if(!silent) toast('New round ready.'); updateBoard();
  }

  function startAuto(){ if(timer) return; const ms=Math.max(0.2,+ui.speed.value)*1000; timer=setInterval(()=>{ if(!state.pile.length){stopAuto();} next(); }, ms); ui.autoBtn.textContent='Auto: On'; }
  function stopAuto(){ if(timer){clearInterval(timer); timer=null; ui.autoBtn.textContent='Auto: Off';} }

  function speak(n){
    if(!('speechSynthesis' in window)) return;
    if(speaking){ window.speechSynthesis.cancel(); speaking=false; }
    const u=new SpeechSynthesisUtterance(`Number ${n}`);
    const vs=speechSynthesis.getVoices();
    const pick=vs.find(v=>/India|en-IN/i.test(v.lang||v.name)) || vs.find(v=>/^en[-_]/i.test(v.lang));
    if(pick) u.voice=pick; u.rate=.95; u.pitch=1.02; speaking=true; u.onend=()=>speaking=false; speechSynthesis.speak(u);
  }

  // tiny toast
  let toastTimer=null;
  function toast(msg){
    if(toastTimer) clearTimeout(toastTimer);
    let t=document.getElementById('toast'); if(!t){ t=document.createElement('div'); t.id='toast';
      Object.assign(t.style,{position:'fixed',left:'50%',bottom:'22px',transform:'translateX(-50%)',
        background:'#111',color:'#fff',padding:'10px 14px',borderRadius:'10px',zIndex:50,boxShadow:'0 8px 20px rgba(0,0,0,.25)'}); document.body.appendChild(t);}
    t.textContent=msg; t.style.opacity='1'; toastTimer=setTimeout(()=>t.style.opacity='0',1400);
  }

  function init(){
    buildGrid(); load(); updateBoard();
    ui.nextBtn.onclick=next; ui.undoBtn.onclick=undo; ui.resetBtn.onclick=()=>confirm('Reset numbers?')&&reset();
    ui.autoBtn.onclick=()=> timer?stopAuto():startAuto();
    ui.speed.oninput=()=>{ if(timer){stopAuto(); startAuto();} };
    window.addEventListener('keydown',(e)=>{ if(['INPUT','TEXTAREA','SELECT'].includes(document.activeElement.tagName)) return;
      if(e.code==='Space'){e.preventDefault(); next();}
      else if(/^[aA]$/.test(e.key)) timer?stopAuto():startAuto();
      else if(/^[zZ]$/.test(e.key)) undo();
      else if(/^[rR]$/.test(e.key)) confirm('Reset numbers?')&&reset();
    });
  }
  init();
})();
</script>
</body>
</html>